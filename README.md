<p align="center">
  <img src="assets/images/icon_256.png" height="256">
  <h1 align="center">MessAuto</h1>
  <h4 align="center"> è‡ªåŠ¨æå–Macå¹³å°çš„çŸ­ä¿¡å’Œé‚®ç®±éªŒè¯ç </h4>
  <h4 align="center"> Automatic extraction of SMS verification code for Mac platform</h4>
<p align="center">
<a href="https://github.com/LeeeSe/MessAuto/blob/master/LICENSE.txt">
<img src="https://img.shields.io/github/license/LeeeSe/messauto"
            alt="License"></a>
<a href="https://github.com/LeeeSe/MessAuto/releases">
<img src="https://img.shields.io/github/downloads/LeeeSe/messauto/total.svg"
            alt="Downloads"></a>
<a href="https://img.shields.io/badge/-macOS-black?&logo=apple&logoColor=white">
<img src="https://img.shields.io/badge/-macOS-black?&logo=apple&logoColor=white"
            alt="macOS"></a>
</p>

<p align="center">
  [<a href="./README.md">ä¸­æ–‡</a>] [<a href="docs/README-EN.md">English</a>]<br>
</p>

# MessAuto

MessAuto æ˜¯ä¸€æ¬¾ macOS å¹³å°è‡ªåŠ¨æå–çŸ­ä¿¡å’Œé‚®ç®±éªŒè¯ç çš„è½¯ä»¶ï¼Œç”± Rust å¼€å‘ï¼Œé€‚ç”¨äºä»»ä½• App

ä¸‹é¢å±•ç¤ºäº†åœ¨ MessAuto çš„è¾…åŠ©ä¸‹å®ŒæˆçŸ­ä¿¡ç™»å½•çš„è¿‡ç¨‹

https://github.com/LeeeSe/MessAuto/assets/44465325/6e0aca37-377f-463b-b27e-a12ff8c1e70b

ğŸ‰ğŸ‰ğŸ‰ MessAuto ç°åœ¨æ”¯æŒé‚®ä»¶ App

https://github.com/LeeeSe/MessAuto/assets/44465325/33dcec87-61c4-4510-a87c-ef43e69c4e9d

## ç‰¹ç‚¹

- åŒæ—¶æ”¯æŒ Mail.app å’Œ iMessage.app
- å¤šè¯­è¨€æ”¯æŒï¼šç›®å‰æ”¯æŒæ±‰è¯­ï¼Œè‹±è¯­ï¼ŒéŸ©è¯­ï¼›æ ¹æ®ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨åˆ‡æ¢
- è½»é‡ï¼šç¨‹åºå ç”¨å­˜å‚¨ 8 Mï¼Œå ç”¨å†…å­˜ 14 M
- ç®€æ´ï¼šæ²¡æœ‰GUIï¼Œåªæœ‰ä¸€ä¸ªå®‰é™çš„ä»»åŠ¡æ æ‰˜ç›˜å›¾æ ‡ï¼Œä½†åŠŸèƒ½å¤Ÿç”¨
- é€‚ç”¨æ€§å¹¿ï¼šSafariæ–¹æ¡ˆåªèƒ½åœ¨Safariæµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œæ­¤è½¯ä»¶é€‚ç”¨äºä»»ä½• APP
- è‡ªåŠ¨åŒ–ï¼šè‡ªåŠ¨ç²˜è´´å›è½¦ï¼Œæˆ–å¼¹å‡ºæ‚¬æµ®çª—
- å¼€æºå…è´¹ï¼šæ”¶è´¹æ–¹æ¡ˆ[2FHey](https://2fhey.com/)è‡³å°‘éœ€è¦5ç¾å…ƒ

## ä½¿ç”¨æ–¹æ³•

MessAuto æ˜¯ä¸€ä¸ªæ²¡æœ‰ GUI çš„èœå•æ è½¯ä»¶ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ MessAuto ä¼šå¼¹çª—å¼•å¯¼ç”¨æˆ·æˆæƒå®Œå…¨ç£ç›˜è®¿é—®æƒé™ï¼Œæˆäºˆæƒé™åç³»ç»Ÿä¼šè¦æ±‚é‡æ–°æ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»å›¾æ ‡åˆ—å‡ºèœå•ï¼š

- è‡ªåŠ¨ç²˜è´´ï¼šMessAuto å°†æ£€æµ‹åˆ°çš„éªŒè¯ç å­˜å‚¨åˆ°ä½ çš„å‰ªè´´æ¿ä¸­ï¼Œå¦‚æœä½ åœ¨è¾“å…¥éªŒè¯ç æ—¶ä¸æƒ³æ‰‹åŠ¨ç²˜è´´ï¼Œå¯ä»¥å¯ç”¨æ­¤é€‰é¡¹ï¼Œå¯ç”¨é€‰é¡¹æ—¶ MessAuto ä¼šä¸»åŠ¨æé†’æ‚¨è¿›è¡Œè¾…åŠ©åŠŸèƒ½æˆæƒ
- è‡ªåŠ¨å›è½¦ï¼šåœ¨è‡ªåŠ¨ç²˜è´´éªŒè¯ç åå†è‡ªåŠ¨å¸®ä½ æŒ‰ä¸‹å›è½¦é”®
- ä¸å ç”¨å‰ªè´´æ¿ï¼š MessAuto ä¸ä¼šå½±å“ä½ å½“å‰å‰ªè´´æ¿ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸æ˜¯ä¸å ç”¨ï¼Œè€Œæ˜¯åœ¨ç²˜è´´éªŒè¯ç åä¼šè‡ªåŠ¨æ¢å¤ä½ ä¹‹å‰çš„å‰ªè´´æ¿å†…å®¹ï¼Œæ— è®ºå›¾ç‰‡æˆ–æ–‡å­—ï¼Œæ‰€ä»¥æ­¤åŠŸèƒ½å¼€å¯æ—¶ä¼šè‡ªåŠ¨å¼€å¯è‡ªåŠ¨ç²˜è´´åŠŸèƒ½
- æš‚æ—¶éšè—ï¼šæš‚æ—¶éšè—å›¾æ ‡ï¼Œåº”ç”¨é‡å¯æ—¶å›¾æ ‡é‡ç°ï¼ˆéœ€å…ˆé€€å‡ºåå°ï¼‰ï¼Œé€‚åˆä¸ç»å¸¸é‡å¯ Mac çš„ç”¨æˆ·
- æ°¸ä¹…éšè—ï¼šæ°¸ä¹…éšè—å›¾æ ‡ï¼Œåº”ç”¨é‡å¯ä¹Ÿä¸ä¼šå†æ˜¾ç¤ºå›¾æ ‡ï¼Œé€‚åˆç»å¸¸é‡å¯ Mac çš„ç”¨æˆ·ï¼Œè‹¥éœ€é‡æ–°æ˜¾ç¤ºå›¾æ ‡ï¼Œéœ€è¦ç¼–è¾‘ `~/.config/messauto/messauto.json` æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ `hide_forever` è®¾ç½®ä¸º `false`ï¼Œå¹¶é‡å¯åº”ç”¨
- é…ç½®ï¼šç‚¹å‡»åå°†æ‰“å¼€jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å…¶ä¸­è‡ªå®šä¹‰å…³é”®è¯
- æ—¥å¿—ï¼šå¿«é€Ÿæ‰“å¼€æ—¥å¿—
- ç›‘å¬é‚®ä»¶ï¼šå¼€å¯åå°†åŒæ—¶ç›‘å¬é‚®ä»¶,è¦æ±‚é‚®ä»¶ App å¸¸é©»åå°
- æ‚¬æµ®çª—ï¼šè·å–éªŒè¯ç åå°†å¼¹å‡ºä¸€ä¸ªæ–¹ä¾¿çš„æ‚¬æµ®çª—å£

> å…³é”®è¯: ä¹Ÿå«è§¦å‘è¯ï¼Œå½“ä¿¡æ¯ä¸­åŒ…å«å¦‚â€œéªŒè¯ç â€ç­‰å…³é”®è¯æ—¶ï¼Œç¨‹åºæ‰ä¼šæ‰§è¡Œä¸€ç³»åˆ—åç»­æ“ä½œï¼Œå¦åˆ™ä¼šå¿½ç•¥æ­¤æ¡ä¿¡æ¯

<!-- <p align="center">
<img src="assets/images/status_item.png" alt="statesitem.jpg" width=548 style="padding:20px" >
</p> -->

## æ³¨æ„

ARM64 ç‰ˆæœ¬æ‰“å¼€æ—¶ä¼šæç¤ºæ–‡ä»¶æŸåï¼Œå› å…¶éœ€è¦ Apple å¼€å‘è€…ç­¾åæ‰å¯ä»¥æ­£å¸¸å¯åŠ¨ï¼Œä½œè€…æ²¡æœ‰ Apple å¼€å‘è€…è¯ä¹¦ï¼Œä¸è¿‡ä½ ä»ç„¶å¯ä»¥é€šè¿‡ä¸€æ¡å‘½ä»¤è§£å†³é—®é¢˜ï¼š

- ç§»åŠ¨ MessAuto.app åˆ° `/Applications` æ–‡ä»¶å¤¹ä¸‹
- ç»ˆç«¯æ‰§è¡Œ`xattr -cr /Applications/MessAuto.app`

å¦‚æœ MessAuto å‡ºç°æ— æ³•è‡ªåŠ¨ç²˜è´´éªŒè¯ç çš„é—®é¢˜ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰è¾…åŠ©åŠŸèƒ½æƒé™æˆ–è€…è‡ªåŠ¨åŒ–æƒé™ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š

1.  æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½® -> å®‰å…¨æ€§ä¸éšç§ -> è¾…åŠ©åŠŸèƒ½ï¼Œå°†å…¶ä¸­ MessAuto åˆ é™¤ï¼Œå¹¶æ·»åŠ æ–°çš„ MessAuto.app
2.  è¿è¡Œ`tccutil reset AppleEvents com.doe.messauto`æ¥é‡ç½® MessAuto çš„è‡ªåŠ¨åŒ–æƒé™,ç„¶åé‡å¯åº”ç”¨å¹¶ä¸æ–­å‹¾é€‰è‡ªåŠ¨ç²˜è´´é€‰é¡¹æ¥è®© MessAuto ä¸»åŠ¨å‘èµ·è‡ªåŠ¨åŒ–æƒé™è¯·æ±‚

## TODO

- [x] ä¼˜åŒ–éªŒè¯ç æå–è§„åˆ™
- [x] è‡ªå®šä¹‰å…³é”®è¯
- [x] èœå•ä¸­å¢åŠ é…ç½®é€‰é¡¹
- [ ] ~~è‡ªåŠ¨åˆ é™¤æå–åçš„éªŒè¯ç çŸ­ä¿¡ï¼ˆæ²¡æœ‰æœ‰æ•ˆæ€è·¯ï¼‰~~
- [x] åº”ç”¨å†…æ›´æ–°
- [x] Github Action è‡ªåŠ¨å‘å¸ƒ release
- [x] å¢åŠ æ—¥å¿—åŠŸèƒ½
- [ ] åˆ¶ä½œ App ä¸»é¡µ
- [x] å¢åŠ æ£€æµ‹é‚®ä»¶éªŒè¯ç åŠŸèƒ½
- [x] æ·»åŠ éªŒè¯ç æ‚¬æµ®çª—
- [x] å¢å¼ºæ‚¬æµ®çª—ä½“éªŒï¼šæ‚¬æµ®çª—å¯åŠ¨ä½ç½®ç”±å½“å‰é¼ æ ‡ä½ç½®å†³å®šï¼Œæ‚¬æµ®çª—å¯ç§»åŠ¨
- [x] å¢å¼ºæ‚¬æµ®çª—ä½“éªŒï¼šæ‚¬æµ®çª—ä¸å†è·å–ç”¨æˆ·ç„¦ç‚¹ï¼Œç®€åŒ–äº†æ‚¬æµ®çª—ä½¿ç”¨æµç¨‹
- [x] è§£å†³å¶å°” cmd é”®æœªæˆåŠŸæ¨¡æ‹ŸæŒ‰ä¸‹çš„é—®é¢˜
- [x] ä¸å†å ç”¨å‰ªè´´æ¿
- [ ] ä¼˜åŒ–éšè—å›¾æ ‡çš„é€»è¾‘
- [ ] ä¸º App ç­¾è¯
- [ ] å‘å¸ƒåˆ° Homebrew

## å¼€å‘åˆè¡·

macOS å¹³å°å¯ä»¥æ–¹ä¾¿åœ°æ¥æ”¶æ¥è‡ª iPhone çš„çŸ­ä¿¡ï¼Œæ— éœ€æ¯æ¬¡æ‰“å¼€æ‰‹æœºæŸ¥çœ‹éªŒè¯ç ã€‚Safari æµè§ˆå™¨æ›´æ˜¯å¯ä»¥ç›´æ¥è‡ªåŠ¨è·å–åˆ°éªŒè¯ç å¹¶æ˜¾ç¤ºåœ¨è¾“å…¥æ¡†å†…ï¼Œç„¶è€Œè¿™ä¸ªå¥½ç”¨çš„åŠŸèƒ½å´ä»…ä»…åœç•™åœ¨äº† Safari æµè§ˆå™¨ä¸Šï¼Œä½†å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½å–œæ¬¢ä½¿ç”¨å®ƒã€‚ä¸ºäº†æŠŠè¿™ä¸ªåŠŸèƒ½å¸¦åˆ°æ‰€æœ‰APPä¸Šï¼Œæˆ‘å¼€å‘äº†è¿™æ¬¾è½¯ä»¶ã€‚

åç»­ä½¿ç”¨ä¸­æˆ‘åˆå‘ç°è®¸å¤šéªŒè¯ç ä¸ä»…ä»…é€šè¿‡çŸ­ä¿¡å‘é€ï¼Œè¿˜æœ‰é€šè¿‡é‚®ä»¶å‘é€çš„ï¼Œæ‰€ä»¥æˆ‘åˆå¢åŠ äº†å¯¹é‚®ä»¶çš„æ”¯æŒã€‚

## è¦æ±‚

- ä½¿ç”¨ **macOSç³»ç»Ÿ**ï¼Œå¹¶å¯ä»¥æ¥æ”¶ **iPhone** çš„çŸ­ä¿¡(å³æ‰“å¼€äº†â€œçŸ­ä¿¡è½¬å‘â€åŠŸèƒ½)
- é‚®ä»¶ App éœ€è¦å¸¸é©»åå°ï¼Œå¦åˆ™æ— æ³•å®æ—¶è·å–åˆ°æœ€æ–°çš„é‚®ä»¶
- å®Œå…¨ç£ç›˜è®¿é—®æƒé™ï¼ˆä¸ºäº†è®¿é—®ä½äº `ï½/Library` ä¸‹çš„ `Message.app` çš„ `chat.db` æ–‡ä»¶ï¼Œä»¥è·å–æœ€æ–°çš„çŸ­ä¿¡ï¼‰
- è¾…åŠ©åŠŸèƒ½æƒé™ï¼ˆæ¨¡æ‹Ÿé”®ç›˜æ“ä½œï¼Œè‡ªåŠ¨ç²˜è´´å¹¶å›è½¦ï¼‰
- è‡ªåŠ¨åŒ–æƒé™ï¼ˆæ¨¡æ‹Ÿé”®ç›˜æ“ä½œï¼Œä½ç½®ï¼šè®¾ç½®->å®‰å…¨æ€§ä¸éšç§->éšç§->è‡ªåŠ¨åŒ–ï¼Œæ­¤æƒé™åªèƒ½ç¨‹åºä¸»åŠ¨è¯·æ±‚ç”¨æˆ·åŒæ„ï¼Œç”¨æˆ·æ— æ³•ä¸»åŠ¨æˆäºˆï¼‰

## å·²çŸ¥ç¼ºé™·

- éƒ¨åˆ†APPæˆ–ç½‘ç«™ä¸æ”¯æŒå›è½¦ç™»é™†ï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»ç™»é™†
- å¶å°”ä¼šå‡ºç°æœªçŸ¥ BUG åƒæ»¡å•æ ¸ CPUï¼ˆæš‚æ—¶æ²¡æ‰¾åˆ°å¤ç°æ¡ä»¶ï¼‰

## è‡ªè¡Œç¼–è¯‘

```bash
# ä¸‹è½½æºç 
git clone https://github.com/LeeeSe/MessAuto.git
cd MessAuto

# ç¼–è¯‘è¿è¡Œï¼ˆéå¿…éœ€ï¼Œä»…ç”¨äºå¼€å‘æµ‹è¯•ï¼‰
cargo run

# å®‰è£… cargo-bundle
cargo install cargo-bundle --git https://github.com/zed-industries/cargo-bundle.git --branch add-plist-extension
# æ‰“åŒ…åº”ç”¨
cargo bundle --release
```

ç”Ÿæˆçš„ MessAuto åº”ç”¨ä½äº `target/release/bundle/osx/MessAuto.app`ã€‚

## æ—¥å¿—ç›®å½•

æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼š`~/.config/messauto/messauto.log`
ä»…ä¿ç•™æœ€è¿‘ä¸€æ¬¡å¯åŠ¨è½¯ä»¶çš„æ—¥å¿—

## å¸¸è§é—®é¢˜

- ç»™äº†æƒé™ä½†è¿˜æ˜¯å¼¹å‡ºæƒé™è¯·æ±‚ï¼šæš‚æ—¶çš„è§£å†³æ–¹æ³•æ˜¯ä»è®¾ç½®é¢æ¿çš„è¾…åŠ©åŠŸèƒ½å’Œç£ç›˜æƒé™åˆ—è¡¨ä¸­å°†åŸæ¥çš„ MessAuto é€šè¿‡ä¸‹é¢çš„"-"å·ç§»é™¤ï¼Œå½“å†æ¬¡å¼¹å‡ºæƒé™è¯·æ±‚æ—¶æ­£å¸¸åŒæ„å³å¯å·¥ä½œ

- æƒé™éƒ½ç»™äº†ï¼ŒéªŒè¯ç å¯ä»¥æå–åˆ°å‰ªè´´æ¿ä½†ä¸ä¼šè‡ªåŠ¨ç²˜è´´ï¼Œå¯èƒ½æ˜¯ç¨‹åºåˆæ¬¡è¯·æ±‚è‡ªåŠ¨åŒ–æƒé™ç”¨æˆ·æ‹’ç»æˆ–ç›´æ¥å¿½ç•¥äº†ï¼Œè¿™ä¸ªæƒé™çš„ä½ç½®åœ¨ï¼šè®¾ç½®->å®‰å…¨æ€§ä¸éšç§->éšç§->è‡ªåŠ¨åŒ–ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥æ·»åŠ ï¼Œåªèƒ½é€šè¿‡ç¨‹åºå†æ¬¡è¯·æ±‚ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡é‡ç½®æƒé™çš„æ–¹å¼è§£å†³ï¼Œè¿è¡Œè¿™æ¡å‘½ä»¤å¹¶é‡å¯ç¨‹åºï¼š`tccutil reset AppleEvents com.doe.messauto`ï¼Œåå¤å‹¾é€‰è‡ªåŠ¨ç²˜è´´é€‰é¡¹æ¥è§¦å‘è‡ªåŠ¨åŒ–æƒé™è¯·æ±‚ï¼š`tccutil reset AppleEvents com.doe.messauto`

## æ„Ÿè°¢

- æ„Ÿè°¢ [@å°šå–„è‹¥æ‹™](https://sspai.com/post/73072) æä¾›è·å–çŸ­ä¿¡æ€è·¯
## èµåŠ©
[![Powered by DartNode](https://dartnode.com/branding/DN-Open-Source-sm.png)](https://dartnode.com "Powered by DartNode - Free VPS for Open Source")
